# ER8 average noise PSD estimates

Average single-detector and multi-detector noise PSDs from ER8. The averaging uses the harmonic mean.

Files generated by the following runs:
 * **ER8_HARM_MEAN_PSD**: `/home/tito/er8/psd_estimation_sep11_sep14` on Atlas
 * **ER8A_HARM_MEAN_PSD**: `/home/dbrown/projects/aligo/er8/psd/psd-output-er8a` on Sugar
 * **ER8B_HARM_MEAN_PSD-1126051217-572400**: `/home/dbrown/projects/aligo/er8/psd/psd-output-er8b` on Sugar
 * **ER8B_HARM_MEAN_PSD-1126051216-1220400**: `/home/tito/er8/noise_psd_estimates/er8b_c00_1.2.0` on Atlas using C00 frames and PyCBC 1.2.0 release

To estimate the PSD yourself, first run

```
pycbc_make_psd_estimation_workflow \
    --config-files \
        https://code.pycbc.phy.syr.edu/ligo-cbc/pycbc-config/download/master/ER8/pipeline/psd_estimation.ini \
        https://code.pycbc.phy.syr.edu/ligo-cbc/pycbc-config/download/master/ER8/pipeline/data_er8b.ini \
    --workflow-name XXX \
    --output-dir run
```

Replace the `data_er8b.ini` URL if you want to use a different data set.
To manually override the GPS times, add an option like
`--config-overrides workflow:end-time:1127224817`. When the first command
completes, submit the workflow with

```
cd run
pycbc_submit_dax --dax XXX.dax --accounting-group ligo.prod.o1.cbc.nsbh.pycbcoffline
```

Wait until completion, then get the average PSDs and plots from the `run/psds`
and `run/plots` directories.

See the [general PyCBC documentation](http://ligo-cbc.github.io/pycbc/latest/html/workflow/pycbc_make_psd_estimation_workflow.html)
if you want to understand the content of `psd_estimation.ini`.
